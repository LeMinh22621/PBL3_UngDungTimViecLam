USE UngDungTimViecLam
GO
CREATE TABLE TB_CATEGORY_JOB
(
	ID_CATEGORY_JOB NVARCHAR(10) NOT NULL,
	CATEGORY_JOB_NAME NVARCHAR(50) NOT NULL

	CONSTRAINT PK_TB_CATEGORY_JOB PRIMARY KEY(ID_CATEGORY_JOB)
)
CREATE TABLE TB_ACCOUNT
(
	ID_ACCOUNT NVARCHAR(10) NOT NULL,
	USERNAME NVARCHAR(10) NOT NULL,
	PASSWORD NVARCHAR(10) NOT NULL,
	EMAIL NVARCHAR(50) NOT NULL,
	PHONENUMBER NVARCHAR(10) NOT NULL,
	ACCESSER BIT, -- 0 JobSeeker, 1 Employer, NULL Admin
	STATUS BIT NOT NULL

	CONSTRAINT PK_TB_ACCOUNT PRIMARY KEY (ID_ACCOUNT)
)
CREATE TABLE TB_EMPLOYER
(
	ID_EMPLOYER NVARCHAR(10) NOT NULL,
	NAME_EMPLOYER NVARCHAR(50) NOT NULL,
	CITY NVARCHAR(50) NOT NULL,
	ID_ACCOUNT NVARCHAR(10) NOT NULL

	CONSTRAINT PK_ID_EMPLOYER PRIMARY KEY (ID_EMPLOYER),
	CONSTRAINT FK_ID_ACCOUNT FOREIGN KEY (ID_ACCOUNT) REFERENCES TB_ACCOUNT(ID_ACCOUNT)
)
CREATE TABLE TB_POST
(
	ID_POST NVARCHAR(10) NOT NULL,
	ID_EMPLOYER NVARCHAR(10) NOT NULL,
	ID_CATEGORY_JOB NVARCHAR(10) NOT NULL,
	JOB_NAME NVARCHAR(50) NOT NULL,
	COMPANY_NAME NVARCHAR(50),
	CITY NVARCHAR(50) NOT NULL,
	SALARY INT NOT NULL,
	LABOR INT NOT NULL, -- NHAN CONG,
	DESCIPTION_JOB NVARCHAR(200),
	STATUS BIT NOT NULL
	
	CONSTRAINT PK_ID_POST PRIMARY KEY (ID_POST),
	CONSTRAINT FK_ID_EMPLOYER FOREIGN KEY (ID_EMPLOYER) REFERENCES TB_EMPLOYER(ID_EMPLOYER),
	CONSTRAINT FK_ID_CATEGORY_JOB FOREIGN KEY (ID_CATEGORY_JOB) REFERENCES TB_CATEGORY_JOB(ID_CATEGORY_JOB)
)
CREATE TABLE TB_JOBSEEKER
(
	ID_JOBSEEKER NVARCHAR(10) NOT NULL,
	ID_ACCOUNT NVARCHAR(10) NOT NULL,
	NAME_JOBSEEKER NVARCHAR(50) NOT NULL,
	CITY NVARCHAR(10) NOT NULL,
	AGE INT NOT NULL,
	PROFESSIONAL NVARCHAR(50) NOT NULL
	

	PRIMARY KEY (ID_JOBSEEKER),
	FOREIGN KEY (ID_ACCOUNT) REFERENCES TB_ACCOUNT(ID_ACCOUNT)
)
/*
ALTER TABLE TB_ACCOUNT ADD STATUS BIT NOT NULL
ALTER TABLE TB_ACCOUNT ADD CATEGORY BIT

ALTER TABLE TB_ACCOUNT
ALTER COLUMN CATEGORY NVARCHAR(10)

EXEC sp_rename 'TB_POST.ENTERPRISE_NAME', 'ID_EMPLOYER', 'COLUMN';

ALTER TABLE TB_POST 
ALTER COLUMN ID_EMPLOYER NVARCHAR(10)

ALTER TABLE TB_POST
DROP CONSTRAINT FK__TB_POST__ID_ADDR__38996AB5

ALTER TABLE TB_POST
ADD FOREIGN KEY (ID_EMPLOYER) REFERENCES TB_EMPLOYER(ID_EMPLOYER)

select CONSTRAINT_NAME
from INFORMATION_SCHEMA.TABLE_CONSTRAINTS
where TABLE_NAME = 'TB_POST'

DROP TABLE TB_POST
DROP TABLE TB_JOBSEEKER
DROP TABLE TB_EMPLOYER
DROP TABLE TB_ACCOUNT
DROP TABLE TB_CATEGORY_JOB
*/